spring.application.name=crypto-mock-trading

# Binance WebSocket Configuration
binance.websocket.base-url=wss://data-stream.binance.vision
binance.websocket.stream-url=wss://data-stream.binance.vision/stream
binance.websocket.reconnect-delay=5000
binance.websocket.max-reconnect-attempts=10
binance.websocket.ping-interval=180000

# Binance Stream Configuration
binance.streams.enabled=false

# NewsData.io Configuration
newsdata.api-key=pub_ad602f5308514d93a53470618751973b
newsdata.base-url=https://newsdata.io/api/1

spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.timeout=60000

# Database
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/mock_trading}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASS:phonghoang68}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Jackson Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# JWT Configuration
jwt.secret=${JWT_SECRET:your-default-secret-key-change-this-in-production-must-be-at-least-256-bits-long}
jwt.expiration=86400

app.kline.valid-intervals=1m,5m,15m,1h,4h,1d
app.kline.max-limit.free=200
app.kline.max-limit.pro=1000
app.kline.max-range-days.free=30
app.kline.max-range-days.pro=365

rate-limit.anonymous.requests-per-minute=20
rate-limit.free.requests-per-minute=60
rate-limit.pro.requests-per-minute=300
rate-limit.bucket-size-multiplier=2

app.limit.matcher.delay=5000
app.alert.checker.delay=60000

# Usage Metrics Batching
app.usage.buffer.enabled=${USAGE_BUFFER_ENABLED:true}
app.usage.flush.interval=${USAGE_FLUSH_INTERVAL_MS:60000}

# Login attempt tracking and brute force protection
auth.login.max-attempts=5
auth.login.lock-duration-minutes=15
auth.login.ip-rate-limit-per-minute=10

# Order simulation (slippage & liquidity thresholds)
order.simulation.slippage-percent=0.001
order.simulation.default-liquidity-threshold=0
order.simulation.price-scale=8
# Example per-symbol liquidity thresholds (quantity). Uncomment as needed.
# order.simulation.liquidity-thresholds.BTCUSDT=1
# order.simulation.liquidity-thresholds.ETHUSDT=5

# Actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
management.info.env.enabled=true
info.app.name=${spring.application.name}
info.app.version=0.0.1-SNAPSHOT
info.app.description=Crypto Mock Trading Backend API

# Cache TTL Configuration (ISO-8601 Duration format: PT1M = 1 minute, PT1H = 1 hour)
cache.ttl.default=PT5M
cache.ttl.klines=PT1M
cache.ttl.symbols=PT1H
cache.ttl.news=PT15M
cache.ttl.ticker=PT30S
cache.ttl.market-data=PT5M

# Stripe Configuration
stripe.secret-key=${STRIPE_SECRET_KEY:sk_test_dummy_key_for_testing_only}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET:whsec_test_dummy_webhook_secret_for_testing_only}
app.base-url=${APP_BASE_URL:http://localhost:8080}

# Email Configuration
email.sendgrid.api-key=${SENDGRID_API_KEY:}
email.sendgrid.from-email=${SENDGRID_FROM_EMAIL:noreply@example.com}
email.sendgrid.from-name=${SENDGRID_FROM_NAME:Crypto Mock Trading}
email.sendgrid.enabled=${SENDGRID_ENABLED:false}

# Email Retry Configuration
email.retry.max-attempts=${EMAIL_RETRY_MAX_ATTEMPTS:3}
email.retry.initial-interval-ms=${EMAIL_RETRY_INITIAL_INTERVAL_MS:1000}
email.retry.multiplier=${EMAIL_RETRY_MULTIPLIER:2.0}
email.retry.max-interval-ms=${EMAIL_RETRY_MAX_INTERVAL_MS:10000}

# Auth Token Configuration
app.auth.token.expiry-hours=${AUTH_TOKEN_EXPIRY_HOURS:1}

# Refresh Token Configuration
app.refresh-token.expiry-days=${REFRESH_TOKEN_EXPIRY_DAYS:30}
app.refresh-token.max-per-user=${REFRESH_TOKEN_MAX_PER_USER:5}

# Idempotency Configuration
app.idempotency.expiry-hours=${IDEMPOTENCY_EXPIRY_HOURS:24}

# Logging
logging.level.com.example.demo.client.binance=INFO
logging.level.org.springframework.web.socket=INFO
