-------------------------------------------------------------------------------
Test set: com.example.demo.service.LimitOrderServiceTest
-------------------------------------------------------------------------------
Tests run: 11, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 0.933 s <<< FAILURE! -- in com.example.demo.service.LimitOrderServiceTest
com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableSellOrder_ShouldFillOrder -- Time elapsed: 0.034 s <<< FAILURE!
Wanted but not invoked:
orderRepository.save(
    <any com.example.demo.entity.Order>
);
-> at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableSellOrder_ShouldFillOrder(LimitOrderServiceTest.java:243)

However, there was exactly 1 interaction with this mock:
orderRepository.findByStatusOrderByCreatedAtAsc(
    PENDING
);
-> at com.example.demo.service.OrderService.processPendingLimitOrders(OrderService.java:352)


	at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableSellOrder_ShouldFillOrder(LimitOrderServiceTest.java:243)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithUnfulfillableBuyOrder_ShouldNotFillOrder -- Time elapsed: 0.007 s <<< FAILURE!
org.mockito.exceptions.verification.NeverWantedButInvoked: 

orderRepository.save(
    <any com.example.demo.entity.Order>
);
Never wanted here:
-> at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithUnfulfillableBuyOrder_ShouldNotFillOrder(LimitOrderServiceTest.java:204)
But invoked here:
-> at com.example.demo.service.OrderService.fillLimitOrder(OrderService.java:399) with arguments: [Order(id=1, orderId=a6d50e67-2bcd-4269-b83a-2085631a547f, userId=fb36c7c1-a741-471a-85e9-8407cee1358f, symbol=BTCUSDT, side=BUY, type=LIMIT, quantity=0.1, price=51000.00, status=FILLED, filledQuantity=0.1, averagePrice=50000.00, totalAmount=5100.00, commission=5.10, createdAt=2025-10-29T12:05:11.180317900Z, updatedAt=2025-10-29T12:05:11.181321300Z)]

	at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithUnfulfillableBuyOrder_ShouldNotFillOrder(LimitOrderServiceTest.java:204)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableBuyOrder_ShouldFillOrder -- Time elapsed: 0.005 s <<< FAILURE!
Wanted but not invoked:
orderRepository.save(
    <any com.example.demo.entity.Order>
);
-> at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableBuyOrder_ShouldFillOrder(LimitOrderServiceTest.java:171)

However, there was exactly 1 interaction with this mock:
orderRepository.findByStatusOrderByCreatedAtAsc(
    PENDING
);
-> at com.example.demo.service.OrderService.processPendingLimitOrders(OrderService.java:352)


	at com.example.demo.service.LimitOrderServiceTest.processPendingLimitOrders_WithFulfillableBuyOrder_ShouldFillOrder(LimitOrderServiceTest.java:171)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

